var d=({element:t,elementButton:e,event:o,onClose:n})=>{!(t.contains(o.target)||t===o.target||e.contains(o.target)||e===o.target)&&t.getAttribute("data-transition-state")==="open"&&(t.setAttribute("data-transition-state","closed"),n&&n())},m=t=>{t&&(t.getAttribute("data-transition-state")==="closed"?(t.setAttribute("open","true"),t.setAttribute("data-transition-state","open")):(t.removeAttribute("open"),t.setAttribute("data-transition-state","closed")))};function f(){let t=document.getElementById("admin-menu-dropdown"),e=document.getElementById("admin-menu-button"),o=n=>{n.stopPropagation(),m(t)};e?.addEventListener("click",o),document.addEventListener("click",n=>{n.stopPropagation(),t&&e&&d({element:t,elementButton:e,event:n})})}function p(){let t=document.getElementById("mobile-menu-container"),e=document.getElementById("mobile-menu-button"),o=document.getElementById("mobile-menu-button-icon-closed"),n=document.getElementById("mobile-menu-button-icon-open"),i=()=>{o?.classList.toggle("hidden"),n?.classList.toggle("hidden")},a=s=>{s.stopPropagation(),m(t),i()};e?.addEventListener("click",a),document.addEventListener("click",s=>{s.stopPropagation(),t&&e&&d({event:s,element:t,elementButton:e,onClose:i})})}var L=()=>{let t=document.getElementById("toast-container"),e=document.getElementById("toast-panel");e?.classList.remove("show-toast"),e?.classList.add("hide-toast"),setTimeout(()=>{t?.classList.remove("flex"),t?.classList.add("hidden")},300)},w=({title:t,subTitle:e,duration:o=5e3})=>{let n=document.getElementById("toast-container"),i=document.getElementById("toast-panel");n?.classList.remove("hidden"),n?.classList.add("flex"),i?.classList.remove("hide-toast"),i?.classList.add("show-toast");let a=document.getElementById("toast-title"),s=document.getElementById("toast-subtitle");a.innerText=t,s.innerText=e,setTimeout(()=>L(),o)};function h(){globalThis.hideToast=L}var I=async t=>{try{await navigator.clipboard.writeText(t),w({title:"Copiado!",subTitle:"El codigo ha sido copiado al portapapeles."})}catch(e){console.error("Failed to copy: ",e)}},k=async t=>{let e={title:"Comparte la alegria!",text:`Utiliza este codigo para obtener un juguete: ${t}`,url:`${window.location.origin}/catalog`};try{await navigator.share(e)}catch(o){console.error("Share failed: ",o)}};function E(){globalThis.copyCode=I,globalThis.shareCode=async t=>{typeof navigator.share>"u"?I(t):k(t)}}var S=(t,e)=>{let o=t.getAttribute(e);if(!o)throw new Error(`Missing ${e} attribute`);let n=o.split(" "),i=n.filter(s=>s.startsWith("final:"));return[n.filter(s=>!s.startsWith("final:")),i]},v=(t,e,o)=>{let[n,i]=S(t,e),a=(s,r)=>{setTimeout(()=>{t.classList.add(r)},s)};n.forEach(s=>{o==="add"?(t.classList.add(s),a(10,s)):t.classList.remove(s)}),i.forEach(s=>{let r=s.split("final:")[1],[g,c]=JSON.parse(r.replace(/'/g,'"'));o==="add"?a(g,c):t.classList.remove(c)})},y=(t,e)=>{v(t,e,"add")},C=(t,e)=>{v(t,e,"remove")},x=(t,e)=>{let o=t.getAttribute(e);if(!o)throw new Error(`Missing ${e} attribute`);let i=o.split(" ").filter(s=>s.startsWith("delay-")||s.startsWith("duration-"));if(!i||!i.length)return 150;let a=0;return i.forEach(s=>{let r=parseInt(s.split("-")[1],10);a+=r}),a};function b(){let t="data-transition-state",e=a=>{a.style.display="none"},o=a=>{a.style.display="block",a.offsetHeight},n=a=>{for(let s of a){let{type:r,attributeName:g,oldValue:c,target:l}=s;if(r!=="attributes"||g!==t||!l)return;let M=l.getAttribute(t);if(y(l,`data-transition-${M}`),M==="open")o(l);else{let F=x(l,`data-transition-${c}`);setTimeout(()=>e(l),F)}c&&C(l,`data-transition-${c}`)}},i=new MutationObserver(n);document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(`[${t}]`).forEach(s=>{let r=s.getAttribute(t);if(r!=="closed"&&r!=="open")throw new Error(`Invalid ${r} for transitions, use data-styles-[state] for non open/close transitions`);r==="closed"?e(s):o(s),y(s,`data-transition-${r}`),i.observe(s,{attributes:!0,attributeOldValue:!0,attributeFilter:[t]})})})}var u=()=>document.getElementsByName("category[]"),A=t=>{t.delete("page");let e=t.toString();window.location.replace(`${window.location.pathname}?${e}`)},H=()=>{let t=document.getElementsByName("age_min")[0],e=document.getElementsByName("age_max")[0];return{ageMin:t.value,ageMax:e.value}},B=()=>{let t=u(),o=Array.from(t).filter(s=>s.checked).map(s=>s.value),n=new URLSearchParams(window.location.search);if(n.delete("category"),n.delete("age_min"),n.delete("age_max"),o.length>0)for(let s of o)n.append("category",s);let{ageMin:i,ageMax:a}=H();parseInt(i,10)>1&&n.set("age_min",i),parseInt(a,10)>1&&n.set("age_max",a),A(n)},O=()=>{let t=u();for(let o of t)o.checked=!1;let e=new URLSearchParams(window.location.search);e.delete("category"),e.delete("age_min"),e.delete("age_max"),A(e)},D=t=>{let e=u();for(let o of e)o.value===t&&(o.checked=!1);B()},$=()=>{let t=new URLSearchParams(window.location.search),e=u();if(t.has("category")){let o=t.getAll("category");for(let n of e)o.includes(n.value)&&(n.checked=!0)}};function T(){globalThis.updateFilters=B,globalThis.clearFilters=O,globalThis.removeFilter=D,$()}b();E();f();p();h();T();
