{
  "version": 3,
  "sources": ["../../assets/js/shared/toast.ts", "../../assets/js/app/myCodes.ts", "../../assets/js/app/catalogFilters.ts", "../../assets/js/shared/htmxErrorHandler.ts"],
  "sourcesContent": ["export enum ToastVariants {\n  SUCCESS = \"\",\n  ERROR = \"error\",\n}\n\nexport interface IShowToast {\n  title: string;\n  subTitle: string;\n  duration?: number;\n  variant?: ToastVariants;\n}\n\nexport const hideToast = (variant: ToastVariants = ToastVariants.SUCCESS) => {\n  const variantSelector = variant ? `${variant}-` : \"\";\n  const toastContainer = document.getElementById(\n    `toast-${variantSelector}container`\n  );\n  const toastPanel = document.getElementById(`toast-${variantSelector}panel`);\n\n  toastPanel?.classList.remove(\"show-toast\");\n  toastPanel?.classList.add(\"hide-toast\");\n\n  setTimeout(() => {\n    toastContainer?.classList.remove(\"flex\");\n    toastContainer?.classList.add(\"hidden\");\n  }, 300);\n};\n\nexport const showToast = ({\n  title,\n  subTitle,\n  duration = 5000,\n  variant = ToastVariants.SUCCESS,\n}: IShowToast) => {\n  const variantSelector = variant ? `${variant}-` : \"\";\n  const toastContainer = document.getElementById(\n    `toast-${variantSelector}container`\n  );\n  const toastPanel = document.getElementById(`toast-${variantSelector}panel`);\n\n  toastContainer?.classList.remove(\"hidden\");\n  toastContainer?.classList.add(\"flex\");\n\n  toastPanel?.classList.remove(\"hide-toast\");\n  toastPanel?.classList.add(\"show-toast\");\n\n  const toastTitle = document.getElementById(`toast-${variantSelector}title`);\n  const toastSubTitle = document.getElementById(\n    `toast-${variantSelector}subtitle`\n  );\n\n  toastTitle!.innerText = title;\n  toastSubTitle!.innerText = subTitle;\n\n  setTimeout(() => hideToast(variant), duration);\n};\n\nexport const showErrorToast = (props: IShowToast) =>\n  showToast({ ...props, variant: ToastVariants.ERROR });\n\nexport const hideErrorToast = () => hideToast(ToastVariants.ERROR);\n\nglobalThis.showToast = showToast;\nglobalThis.hideToast = hideToast;\nglobalThis.showErrorToast = showErrorToast;\nglobalThis.hideErrorToast = hideErrorToast;\n", "import { showToast } from \"../shared/toast\";\n\nconst copy = async (code: string) => {\n  try {\n    await navigator.clipboard.writeText(code);\n    showToast({\n      title: \"Copiado!\",\n      subTitle: \"El codigo ha sido copiado al portapapeles.\",\n    });\n  } catch (err) {\n    console.error(\"Failed to copy: \", err);\n  }\n};\n\nconst share = async (code: string) => {\n  const data = {\n    title: \"Comparte la alegria!\",\n    text: `Utiliza este codigo para obtener un juguete: ${code}`,\n    url: `${window.location.origin}/catalog`,\n  };\n\n  try {\n    await navigator.share(data);\n  } catch (err) {\n    console.error(\"Share failed: \", err);\n  }\n};\n\nglobalThis.copyCode = copy;\nglobalThis.shareCode = async (code: string) => {\n  if (typeof navigator.share === \"undefined\") {\n    copy(code);\n  } else {\n    share(code);\n  }\n};\n", "const getFilters = () =>\n  document.getElementsByName(\"category[]\") as NodeListOf<HTMLInputElement>;\n\nconst updateUrlFilters = (params) => {\n  params.delete(\"page\");\n  const newQueryString = params.toString();\n  window.location.replace(`${window.location.pathname}?${newQueryString}`);\n};\n\nconst getAgeFilters = () => {\n  const ageMin = document.getElementsByName(\"age_min\")[0] as HTMLInputElement;\n  const ageMax = document.getElementsByName(\"age_max\")[0] as HTMLInputElement;\n  return { ageMin: ageMin.value, ageMax: ageMax.value };\n};\n\nexport const updateFilters = () => {\n  const filters = getFilters();\n\n  const selectedFilters = Array.from(filters).filter(\n    (filter) => filter.checked\n  );\n  const selectedFiltersValues = selectedFilters.map((filter) => filter.value);\n\n  const params = new URLSearchParams(window.location.search);\n\n  params.delete(\"category\");\n  params.delete(\"age_min\");\n  params.delete(\"age_max\");\n\n  if (selectedFiltersValues.length > 0) {\n    for (const filter of selectedFiltersValues) {\n      params.append(\"category\", filter);\n    }\n  }\n\n  const { ageMin, ageMax } = getAgeFilters();\n  if (parseInt(ageMin, 10) > 1) {\n    params.set(\"age_min\", ageMin);\n  }\n  if (parseInt(ageMax, 10) > 1) {\n    params.set(\"age_max\", ageMax);\n  }\n\n  updateUrlFilters(params);\n};\n\nconst clearFilters = () => {\n  const filters = getFilters();\n\n  for (const filter of filters) {\n    filter.checked = false;\n  }\n\n  const params = new URLSearchParams(window.location.search);\n\n  params.delete(\"category\");\n  params.delete(\"age_min\");\n  params.delete(\"age_max\");\n\n  updateUrlFilters(params);\n};\n\nconst removeFilter = (filterValue) => {\n  const filters = getFilters();\n\n  if (filterValue === \"age_min\") {\n    const ageMin = document.getElementsByName(\"age_min\")[0] as HTMLInputElement;\n    ageMin.value = \"0\";\n  } else if (filterValue === \"age_max\") {\n    const ageMax = document.getElementsByName(\"age_max\")[0] as HTMLInputElement;\n    ageMax.value = \"0\";\n  }\n\n  for (const filter of filters) {\n    if (filter.value === filterValue) {\n      filter.checked = false;\n    }\n  }\n\n  updateFilters();\n};\n\nconst setUrlFilters = () => {\n  const params = new URLSearchParams(window.location.search);\n  const filters = getFilters();\n\n  if (params.has(\"category\")) {\n    const selectedFilters = params.getAll(\"category\");\n\n    for (const filter of filters) {\n      if (selectedFilters.includes(filter.value)) {\n        filter.checked = true;\n      }\n    }\n  }\n};\n\nglobalThis.updateFilters = updateFilters;\nglobalThis.clearFilters = clearFilters;\nglobalThis.removeFilter = removeFilter;\nsetUrlFilters();\n", "import { HtmxResponseInfo } from \"../../@types/htmx.esm\";\nimport { showErrorToast } from \"./toast\";\n\ninterface HtmxResponseErrorEvent extends Event {\n  detail: HtmxResponseInfo;\n}\n\ndeclare global {\n  interface WindowEventMap {\n    \"htmx:responseError\": HtmxResponseErrorEvent;\n  }\n}\n\nwindow.addEventListener<\"htmx:responseError\">(\"htmx:responseError\", (e) => {\n  console.log(e);\n  const code = e.detail.xhr.status;\n  if (code === 500) {\n    showErrorToast({\n      title: \"Error del servidor\",\n      subTitle: \"Ha ocurrido un error inesperado. Por favor intenta de nuevo.\",\n    });\n  }\n});\n"],
  "mappings": "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",
  "names": []
}
