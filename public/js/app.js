document.addEventListener("alpine:init",()=>{Alpine.data("toasts",()=>({notifications:[],displayDuration:5e3,addNotification(e){let t=Date.now();this.notifications.length>=20&&this.notifications.splice(0,this.notifications.length-19),this.notifications.push({...e,id:t})},removeNotification(e){setTimeout(()=>{this.notifications=this.notifications.filter(t=>t.id!==e)},400)}}))});function i(e){window.dispatchEvent(new CustomEvent("notify",{detail:e}))}window.addEventListener("htmx:responseError",e=>{console.log(e),e.detail.xhr.status===500&&i({variant:"error",title:"Error del servidor",message:"Ha ocurrido un error inesperado. Por favor intenta de nuevo."})});var c=async e=>{try{await navigator.clipboard.writeText(e),i({variant:"error",title:"Copiado!",message:"El codigo ha sido copiado al portapapeles."})}catch(t){console.error("Failed to copy: ",t)}},g=async e=>{let t={title:"Comparte la alegria!",text:`Utiliza este codigo para obtener un juguete: ${e}`,url:`${window.location.origin}/catalog`};try{await navigator.share(t)}catch(o){console.error("Share failed: ",o)}};globalThis.copyCode=c;globalThis.shareCode=async e=>{typeof navigator.share>"u"?c(e):g(e)};function f(e,t){let o;return function(...a){o&&clearTimeout(o),o=setTimeout(()=>{e.apply(this,a)},t)}}var d=f;var r=()=>document.getElementsByName("category[]"),p=e=>{e.delete("page");let t=e.toString();window.location.replace(`${window.location.pathname}?${t}`)},u=()=>{let e=document.getElementsByName("age_min")[0],t=document.getElementsByName("age_max")[0];return{ageMin:e.value,ageMax:t.value}},m=()=>{let e=r(),o=Array.from(e).filter(n=>n.checked).map(n=>n.value),a=new URLSearchParams(window.location.search);if(a.delete("category"),a.delete("age_min"),a.delete("age_max"),o.length>0)for(let n of o)a.append("category",n);let{ageMin:s,ageMax:l}=u();parseInt(s,10)>1&&a.set("age_min",s),parseInt(l,10)>1&&a.set("age_max",l),p(a)},h=()=>{let e=r();for(let o of e)o.checked=!1;let t=new URLSearchParams(window.location.search);t.delete("category"),t.delete("age_min"),t.delete("age_max"),p(t)},w=e=>{let t=r();if(e==="age_min"){let o=document.getElementsByName("age_min")[0];o.value="0"}else if(e==="age_max"){let o=document.getElementsByName("age_max")[0];o.value="0"}for(let o of t)o.value===e&&(o.checked=!1);m()},v=()=>{let e=new URLSearchParams(window.location.search),t=r();if(e.has("category")){let o=e.getAll("category");for(let a of t)o.includes(a.value)&&(a.checked=!0)}};globalThis.updateFilters=m;globalThis.clearFilters=h;globalThis.removeFilter=w;v();var y=()=>{document.body.scrollTop>300||document.documentElement.scrollTop>300?window.dispatchEvent(new CustomEvent("showbacktotopbtn")):window.dispatchEvent(new CustomEvent("hidebacktotopbtn"))},T=d(y,250);window.addEventListener("scroll",T);gsap.registerPlugin(ScrollTrigger);for(let e=1;e<=3;e++)gsap.to(`#home-ilustracion-${e}`,{scrollTrigger:{trigger:`#home-ilustracion-${e}`,toggleActions:"play pause resume reset",start:"top 80%"},duration:1,opacity:1});
