{
  "version": 3,
  "sources": ["../../assets/js/shared/toasts.ts", "../../assets/js/shared/htmxErrorHandler.ts", "../../assets/js/app/myCodes.ts", "../../assets/js/utils/debounce.ts", "../../assets/js/app/catalog.ts"],
  "sourcesContent": ["/// <reference types=\"alpinejs\" />\nimport type { Alpine as AlpineType } from \"alpinejs\";\n\ndeclare global {\n  var Alpine: AlpineType;\n}\n\nexport interface Toast {\n  variant: \"info\" | \"success\" | \"warning\" | \"error\";\n  title: string | null;\n  message: string | null;\n}\n\ndocument.addEventListener(\"alpine:init\", () => {\n  Alpine.data(\"toasts\", () => ({\n    notifications: [],\n    displayDuration: 5000,\n\n    addNotification(notification: Toast) {\n      const id = Date.now();\n\n      // Keep only the most recent 20 notifications\n      if (this.notifications.length >= 20) {\n        this.notifications.splice(0, this.notifications.length - 19);\n      }\n\n      // Add the new notification to the notifications stack\n      this.notifications.push({ ...notification, id });\n    },\n    removeNotification(id) {\n      setTimeout(() => {\n        this.notifications = this.notifications.filter(\n          (notification) => notification.id !== id\n        );\n      }, 400);\n    },\n  }));\n});\n\nexport function showToast(toast: Toast) {\n  window.dispatchEvent(new CustomEvent(\"notify\", { detail: toast }));\n}\n", "import { HtmxResponseInfo } from \"../../@types/htmx.esm\";\nimport { showToast } from \"./toasts\";\n\ninterface HtmxResponseErrorEvent extends Event {\n  detail: HtmxResponseInfo;\n}\n\ndeclare global {\n  interface WindowEventMap {\n    \"htmx:responseError\": HtmxResponseErrorEvent;\n  }\n}\n\nwindow.addEventListener<\"htmx:responseError\">(\"htmx:responseError\", (e) => {\n  console.log(e);\n  const code = e.detail.xhr.status;\n  if (code === 500) {\n    showToast({\n      variant: \"error\",\n      title: \"Error del servidor\",\n      message: \"Ha ocurrido un error inesperado. Por favor intenta de nuevo.\",\n    });\n  }\n});\n", "import { showToast } from \"../shared/toasts\";\n\nconst copy = async (code: string) => {\n  try {\n    await navigator.clipboard.writeText(code);\n    showToast({\n      variant: \"error\",\n      title: \"Copiado!\",\n      message: \"El codigo ha sido copiado al portapapeles.\",\n    });\n  } catch (err) {\n    console.error(\"Failed to copy: \", err);\n  }\n};\n\nconst share = async (code: string) => {\n  const data = {\n    title: \"Comparte la alegria!\",\n    text: `Utiliza este codigo para obtener un juguete: ${code}`,\n    url: `${window.location.origin}/catalog`,\n  };\n\n  try {\n    await navigator.share(data);\n  } catch (err) {\n    console.error(\"Share failed: \", err);\n  }\n};\n\nglobalThis.copyCode = copy;\nglobalThis.shareCode = async (code: string) => {\n  if (typeof navigator.share === \"undefined\") {\n    copy(code);\n  } else {\n    share(code);\n  }\n};\n", "function debounce<T extends (...args: any[]) => void>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: ReturnType<typeof setTimeout> | null;\n\n  return function (...args: Parameters<T>): void {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      func.apply(this, args);\n    }, wait);\n  };\n}\n\nexport default debounce;\n", "import debounce from \"../utils/debounce\";\n\nconst getFilters = () =>\n  document.getElementsByName(\"category[]\") as NodeListOf<HTMLInputElement>;\n\nconst updateUrlFilters = (params) => {\n  params.delete(\"page\");\n  const newQueryString = params.toString();\n  window.location.replace(`${window.location.pathname}?${newQueryString}`);\n};\n\nconst getAgeFilters = () => {\n  const ageMin = document.getElementsByName(\"age_min\")[0] as HTMLInputElement;\n  const ageMax = document.getElementsByName(\"age_max\")[0] as HTMLInputElement;\n  return { ageMin: ageMin.value, ageMax: ageMax.value };\n};\n\nexport const updateFilters = () => {\n  const filters = getFilters();\n\n  const selectedFilters = Array.from(filters).filter(\n    (filter) => filter.checked\n  );\n  const selectedFiltersValues = selectedFilters.map((filter) => filter.value);\n\n  const params = new URLSearchParams(window.location.search);\n\n  params.delete(\"category\");\n  params.delete(\"age_min\");\n  params.delete(\"age_max\");\n\n  if (selectedFiltersValues.length > 0) {\n    for (const filter of selectedFiltersValues) {\n      params.append(\"category\", filter);\n    }\n  }\n\n  const { ageMin, ageMax } = getAgeFilters();\n  if (parseInt(ageMin, 10) > 1) {\n    params.set(\"age_min\", ageMin);\n  }\n  if (parseInt(ageMax, 10) > 1) {\n    params.set(\"age_max\", ageMax);\n  }\n\n  updateUrlFilters(params);\n};\n\nconst clearFilters = () => {\n  const filters = getFilters();\n\n  for (const filter of filters) {\n    filter.checked = false;\n  }\n\n  const params = new URLSearchParams(window.location.search);\n\n  params.delete(\"category\");\n  params.delete(\"age_min\");\n  params.delete(\"age_max\");\n\n  updateUrlFilters(params);\n};\n\nconst removeFilter = (filterValue) => {\n  const filters = getFilters();\n\n  if (filterValue === \"age_min\") {\n    const ageMin = document.getElementsByName(\"age_min\")[0] as HTMLInputElement;\n    ageMin.value = \"0\";\n  } else if (filterValue === \"age_max\") {\n    const ageMax = document.getElementsByName(\"age_max\")[0] as HTMLInputElement;\n    ageMax.value = \"0\";\n  }\n\n  for (const filter of filters) {\n    if (filter.value === filterValue) {\n      filter.checked = false;\n    }\n  }\n\n  updateFilters();\n};\n\nconst setUrlFilters = () => {\n  const params = new URLSearchParams(window.location.search);\n  const filters = getFilters();\n\n  if (params.has(\"category\")) {\n    const selectedFilters = params.getAll(\"category\");\n\n    for (const filter of filters) {\n      if (selectedFilters.includes(filter.value)) {\n        filter.checked = true;\n      }\n    }\n  }\n};\n\nglobalThis.updateFilters = updateFilters;\nglobalThis.clearFilters = clearFilters;\nglobalThis.removeFilter = removeFilter;\nsetUrlFilters();\n\n// Back to top button display\nconst handleBackToTopScroll = () => {\n  if (\n    document.body.scrollTop > 300 ||\n    document.documentElement.scrollTop > 300\n  ) {\n    window.dispatchEvent(new CustomEvent(\"showbacktotopbtn\"));\n  } else {\n    window.dispatchEvent(new CustomEvent(\"hidebacktotopbtn\"));\n  }\n};\n\nconst scrollHandler = debounce(handleBackToTopScroll, 250);\n\nwindow.addEventListener(\"scroll\", scrollHandler);\n"],
  "mappings": "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",
  "names": []
}
