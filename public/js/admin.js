function o(){return class{$data;$dispatch;$el;$id;$nextTick;$refs;$root;$store;$watch;destroy;name;Id;Items;ItemsFiltered;ItemActive;ItemSelected;Search;fetchItemsUrl;constructor(e,t){this.Id=t+Date.now().toString(),this.name=t,this.Items=[],this.ItemsFiltered=[],this.ItemActive=null,this.ItemSelected=null,this.Search="",this.fetchItemsUrl=e}async init(){this.$watch("Search",()=>this.SearchItems()),this.$watch("ItemSelected",e=>this.SelectItem(e)),this.Items=await(await fetch(this.fetchItemsUrl)).json()}SearchIsEmpty(){return this.Search.length==0}ItemIsActive(e){return!!(this.ItemActive&&this.ItemActive.Value==e.Value)}ClearState(){this.ItemsFiltered=[],this.ItemActive=null,this.Search=""}ItemActiveNext(){if(!this.ItemActive)return;let e=this.ItemsFiltered.indexOf(this.ItemActive);e<this.ItemsFiltered.length-1&&(this.ItemActive=this.ItemsFiltered[e+1],this.ScrollToActiveItem())}ItemActivePrevious(){if(!this.ItemActive)return;let e=this.ItemsFiltered.indexOf(this.ItemActive);e>0&&(this.ItemActive=this.ItemsFiltered[e-1],this.ScrollToActiveItem())}ScrollToActiveItem(){if(this.ItemActive){let e=document.getElementById(this.ItemActive.Value+"-"+this.Id);if(!e)return;let t=e.offsetTop+e.offsetHeight-this.$refs.ItemsList.offsetHeight;t>0?this.$refs.ItemsList.scrollTop=t:this.$refs.ItemsList.scrollTop=0}}SearchItems(){if(this.SearchIsEmpty()){this.ClearState();return}if(!this.SearchIsEmpty()){let e=this.Search.replace(/\*/g,"").toLowerCase();this.ItemsFiltered=this.Items.filter(t=>t.Label.toLowerCase().includes(e)),this.ScrollToActiveItem()}}SelectItem(e){e&&(this.$dispatch(`searchbox-item-selected-${this.name}`,{item:e}),this.ClearState())}AddItem(){if(this.SearchIsEmpty())return;let e={Label:this.Search,Value:this.Search};this.Items.push(e),this.$dispatch(`searchbox-item-selected-${this.name}`,{item:e}),this.ClearState()}}}document.addEventListener("alpine:init",()=>{let i=(e,t)=>{let s=o();return new s(e,t)};Alpine.data("SearchBox",i)});var a=document.getElementById("remove_code_form");a?.addEventListener("change",i=>{let e=i.target;if(e.name==="volunteer_code_ids"){let t=e.nextElementSibling;t.checked=e.checked}});globalThis.selectAllUnsigned=()=>{let e=document.getElementById("assign-codes-form")?.getElementsByTagName("input");if(!(!e||!e.length))for(let t=0;t<e?.length;t++)e[t].type==="checkbox"&&(e[t].checked=!0)};globalThis.orderCompletedToggleClick=i=>{i.classList.toggle("bg-indigo-600"),i.classList.toggle("bg-gray-200"),i.children[0].classList.toggle("translate-x-0"),i.children[0].classList.toggle("translate-x-5");let e=i.previousElementSibling;e.value=e.value==="1"?"0":"1"};window.addEventListener("SearchBox:ItemSelected:category",i=>{let t=i.detail?.item;if(!t)return;let s=document.getElementById("category"),r=t.Value,n=s.value.split(",");if(n.includes(r))return;let c=[...n,r];s.value=c.join(",")});document.addEventListener("alpine:init",()=>{Alpine.data("CategoryWithSearch",i=>({category:i,setNewCategory(e){let t=e.detail?.item;if(!t)return;let s=t.Value,r=this.category?this.category.split(","):[];if(r.includes(s))return;let n=[...r,s];this.category=n.join(",")},removeCategory(e){let t=this.category.split(",").filter(s=>s!==e);if(t.length>0){this.category=t.join(",");return}this.category=""}}))});
